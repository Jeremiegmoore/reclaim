{"version":3,"sources":["../../contracts/src/abis.js","App.js","index.js"],"names":["abis","deed","registrar","registrarAbi","registry","registryAbi","sha3","require","keccak_256","GET_LABEL_NAME","gql","GET_STATS","GET_ACCOUNTS","App","signer","ensClient","registrarAddress","registryAddress","stage","useState","provider","setProvider","account","setAccount","network","setNetwork","address","setAddress","value","setValue","setDeed","connected","setConnected","message","setMessage","warning","setWarning","accountData","useQuery","variables","data","labelData","client","statsEntity","throttled","useRef","throttle","label","callback","checkAccount","a","getAddress","res","toLowerCase","lookupName","console","log","match","encoded","namehash","hash","Contract","owner","lookupDeed","childDomain","replace","labelhash","entries","bid","deedAddress","registrationDate","highestBid","deedOwner","Math","pow","handleInput","event","target","current","name","releaseDeed","getSigner","registrarWithSigner","connect","ethereum","request","method","checkNetwork","getNetwork","ret","chainId","useEffect","window","Web3Provider","InfuraProvider","JsonRpcProvider","isOwner","isDeedOwner","deeds","domains","map","filter","domain","id","labelName","sum","d","reduce","b","parseFloat","className","src","alt","style","color","marginBottom","onChange","placeholder","marginTop","length","toFixed","displayName","slice","onClick","width","numOfDeeds","currentValue","href","ENV","process","ApolloClient","uri","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.78879c6a.chunk.js","sourcesContent":["import registrarAbi from \"./abis/registrar.json\";\nimport registryAbi from \"./abis/registry.json\";\nimport deedAbi from \"./abis/deed.json\";\n\nconst abis = {\n  deed: deedAbi,\n  registrar: registrarAbi,\n  registry: registryAbi,\n};\n\nexport default abis;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { JsonRpcProvider, Web3Provider, InfuraProvider } from \"@ethersproject/providers\";\nimport namehash from 'eth-ens-namehash';\nimport { gql } from \"apollo-boost\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { abis } from \"@project/contracts\";\nimport { throttle } from 'lodash';\nimport \"./App.css\";\nconst sha3 = require('js-sha3').keccak_256\n\nconst imgData = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNzIuNTIgODAuOTUiPjxkZWZzPjxzdHlsZT4uY2xzLTN7ZmlsbDojYTBhOGQ0fTwvc3R5bGU+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSI0MS45NSIgeTE9IjIuNTciIHgyPSIxMi41NyIgeTI9IjM0LjQyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuNTgiIHN0b3AtY29sb3I9IiNhMGE4ZDQiLz48c3RvcCBvZmZzZXQ9Ii43MyIgc3RvcC1jb2xvcj0iIzg3OTFjNyIvPjxzdG9wIG9mZnNldD0iLjkxIiBzdG9wLWNvbG9yPSIjNjQ3MGI0Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iNDIuNTciIHkxPSI4MS42NiIgeDI9IjcxLjk2IiB5Mj0iNDkuODEiIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0zIiB4MT0iNDIuMjYiIHkxPSIxLjI0IiB4Mj0iNDIuMjYiIHkyPSI4Mi44NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzUxM2VmZiIvPjxzdG9wIG9mZnNldD0iLjE4IiBzdG9wLWNvbG9yPSIjNTE1N2ZmIi8+PHN0b3Agb2Zmc2V0PSIuNTciIHN0b3AtY29sb3I9IiM1Mjk4ZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1MmU1ZmYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyBzdHlsZT0iaXNvbGF0aW9uOmlzb2xhdGUiPjxnIGlkPSJMYXllcl8xIiBkYXRhLW5hbWU9IkxheWVyIDEiPjxwYXRoIGQ9Ik0xNS4yOCAzNC4zOWMuOCAxLjcxIDIuNzggNS4wOSAyLjc4IDUuMDlMNDAuOTUgMS42NGwtMjIuMzQgMTUuNmE5Ljc1IDkuNzUgMCAwIDAtMy4xOCAzLjUgMTYuMTkgMTYuMTkgMCAwIDAtLjE1IDEzLjY1eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYgLTEuNjQpIiBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudCkiLz48cGF0aCBjbGFzcz0iY2xzLTMiIGQ9Ik02LjIxIDQ2Ljg1YTI1LjQ3IDI1LjQ3IDAgMCAwIDEwIDE4LjUxbDI0LjcxIDE3LjIzcy0xNS40Ni0yMi4yOC0yOC41LTQ0LjQ1YTIyLjM5IDIyLjM5IDAgMCAxLTIuNjItNy41NiAxMi4xIDEyLjEgMCAwIDEgMC0zLjYzYy0uMzQuNjMtMSAxLjkyLTEgMS45MmEyOS4zNSAyOS4zNSAwIDAgMC0yLjY3IDguNTUgNTIuMjggNTIuMjggMCAwIDAgLjA4IDkuNDN6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNiAtMS42NCkiLz48cGF0aCBkPSJNNjkuMjUgNDkuODRjLS44LTEuNzEtMi43OC01LjA5LTIuNzgtNS4wOUw0My41OCA4Mi41OSA2NS45MiA2N2E5Ljc1IDkuNzUgMCAwIDAgMy4xOC0zLjUgMTYuMTkgMTYuMTkgMCAwIDAgLjE1LTEzLjY2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYgLTEuNjQpIiBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudC0yKSIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTc4LjMyIDM3LjM4YTI1LjQ3IDI1LjQ3IDAgMCAwLTEwLTE4LjUxTDQzLjYxIDEuNjRzMTUuNDUgMjIuMjggMjguNSA0NC40NWEyMi4zOSAyMi4zOSAwIDAgMSAyLjYxIDcuNTYgMTIuMSAxMi4xIDAgMCAxIDAgMy42M2MuMzQtLjYzIDEtMS45MiAxLTEuOTJhMjkuMzUgMjkuMzUgMCAwIDAgMi42Ny04LjU1IDUyLjI4IDUyLjI4IDAgMCAwLS4wNy05LjQzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYgLTEuNjQpIi8+PHBhdGggZD0iTTE1LjQzIDIwLjc0YTkuNzUgOS43NSAwIDAgMSAzLjE4LTMuNWwyMi4zNC0xNS42LTIyLjg5IDM3Ljg1cy0yLTMuMzgtMi43OC01LjA5YTE2LjE5IDE2LjE5IDAgMCAxIC4xNS0xMy42NnpNNi4yMSA0Ni44NWEyNS40NyAyNS40NyAwIDAgMCAxMCAxOC41MWwyNC43MSAxNy4yM3MtMTUuNDYtMjIuMjgtMjguNS00NC40NWEyMi4zOSAyMi4zOSAwIDAgMS0yLjYyLTcuNTYgMTIuMSAxMi4xIDAgMCAxIDAtMy42M2MtLjM0LjYzLTEgMS45Mi0xIDEuOTJhMjkuMzUgMjkuMzUgMCAwIDAtMi42NyA4LjU1IDUyLjI4IDUyLjI4IDAgMCAwIC4wOCA5LjQzem02MyAzYy0uOC0xLjcxLTIuNzgtNS4wOS0yLjc4LTUuMDlMNDMuNTggODIuNTkgNjUuOTIgNjdhOS43NSA5Ljc1IDAgMCAwIDMuMTgtMy41IDE2LjE5IDE2LjE5IDAgMCAwIC4xNS0xMy42NnptOS4wNy0xMi40NmEyNS40NyAyNS40NyAwIDAgMC0xMC0xOC41MUw0My42MSAxLjY0czE1LjQ1IDIyLjI4IDI4LjUgNDQuNDVhMjIuMzkgMjIuMzkgMCAwIDEgMi42MSA3LjU2IDEyLjEgMTIuMSAwIDAgMSAwIDMuNjNjLjM0LS42MyAxLTEuOTIgMS0xLjkyYTI5LjM1IDI5LjM1IDAgMCAwIDIuNjctOC41NSA1Mi4yOCA1Mi4yOCAwIDAgMC0uMDctOS40M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02IC0xLjY0KSIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOmNvbG9yIiBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudC0zKSIvPjwvZz48L2c+PC9zdmc+'\nconst GET_LABEL_NAME = gql`\nquery Account($account: String!){\n  account(id:$account){\n\t\tid\n    domains{\n      id\n      labelhash\n      labelName\n    }\n  }\n}\n`;\n\nconst GET_STATS = gql`\nquery {\n\tstatsEntity(id:\"\"){\n    id\n    numOfDeeds\n    currentValue\n    accumValue\n  }\n}\n`\n\nconst GET_ACCOUNTS = gql`\nquery Account($account: String!){\n  account(id:$account){\n    id\n    deeds(first:500) {\n      id\n      value\n      name {\n        id\n      }\n    }\n  }\n}\n`\n\nfunction App({\n  ensClient, registrarAddress, registryAddress, stage\n}) {\n  const [provider, setProvider] = useState(false)\n  const [account, setAccount] = useState('')\n  const [network, setNetwork] = useState('')\n  const [address, setAddress] = useState(false)\n  const [value, setValue] = useState('')\n  const [deed, setDeed] = useState()\n  const [connected, setConnected] = useState(false)\n  const [message, setMessage] = useState(false)\n  const [warning, setWarning] = useState(false)\n  const { data:accountData } = useQuery(GET_ACCOUNTS, {variables: { account }});\n  const { data:labelData } = useQuery(GET_LABEL_NAME, {variables: { account }, client:ensClient});\n  const { data:{ statsEntity } = {} } = useQuery(GET_STATS);\n  const throttled = useRef(throttle((label, callback) => callback(label), 1000))\n\n  const checkAccount = async(signer) =>{\n    let res\n    try{\n      res = await signer.getAddress()\n      setAddress(res.toLowerCase())\n      setValue(res.toLowerCase())\n      setAccount(res.toLowerCase())\n    }catch(c){\n      setWarning('Your wallet is not connected')\n    }\n  }\n  const lookupName = async(provider, label) => {\n    console.log('***lookupName1', {label})\n    if (!label.match(/\\.eth/)) {\n      return false\n    }\n    let encoded, registry\n    try{\n      encoded = namehash.hash(label)\n      console.log('***lookupName2', {encoded, registryAddress})\n      registry = new Contract(registryAddress, abis.registry, provider);\n      console.log('***lookupName3', {registry})\n      const res = await registry.owner(encoded)\n      console.log('***lookupName4', {res})\n      return res\n    }catch(e){\n      setMessage('Problem looking up the name')\n      return false\n    }\n  }\n\n  const lookupDeed = async(provider, label) => {\n    if (!label.match(/\\.eth/)) {\n      return false\n    }\n    let encoded, registrar, labelhash, childDomain, deedOwner, deed\n    try{\n      encoded = namehash.hash(label)\n      childDomain = label.replace(/\\.eth$/, '')\n      labelhash = '0x' + sha3(childDomain)\n      registrar = new Contract(registrarAddress, abis.registrar, provider);\n      console.log('***lookupDeed1', {registrarAddress, labelhash})\n      const [bid, deedAddress, registrationDate, value, highestBid] = await registrar.entries(labelhash)\n      console.log('***lookupDeed2', {label, bid, deedAddress, registrationDate, value, highestBid})\n      if(bid > 0){\n        deed = new Contract(deedAddress, abis.deed, provider);\n        deedOwner = await deed.owner()\n        return {\n          value: (value / Math.pow(10,18)),\n          labelhash,\n          deedOwner\n        }\n      }\n    }catch(e){\n      setMessage('Problem looking up the deed')\n      return false\n    }\n  }\n\n  const handleInput = async(event)=>{\n    const label = event.target.value.toLowerCase()\n    setValue(label)\n    throttled.current(label, async (label)=>{\n      const name  = await lookupName(provider, label)\n      setDeed(await lookupDeed(provider, label))\n      if(!name || name === '0x0000000000000000000000000000000000000000'){\n        setAccount(label.toLowerCase())\n      }else{\n        setAccount(name.toLowerCase())\n      }\n    })\n  }\n\n  const releaseDeed = async(provider, label) =>{\n    const signer = provider.getSigner()  \n    const registrar = new Contract(registrarAddress, abis.registrar, provider);\n    const registrarWithSigner = registrar.connect(signer)\n    // A pre-defined address that owns some CEAERC20 tokens\n    const tx = await registrarWithSigner.releaseDeed(label)\n    setMessage('Transaction has been sent')\n  }\n  \n  const connect = async(ethereum) =>{\n    await ethereum.request({ method: 'eth_requestAccounts' })\n  }\n  \n  const checkNetwork = async(provider) => {\n    let ret = provider && await provider.getNetwork()\n    setNetwork(ret.chainId)\n  }\n\n  let signer\n  useEffect(() => {\n\n    if (window && window.ethereum) {\n      connect(window.ethereum)\n      setProvider(new Web3Provider(window.ethereum))\n      signer = provider && provider.getSigner()\n      if(connected){\n        if(!address){\n          if (signer) checkAccount(signer)\n        }\n      }else{\n        setConnected(true)\n      }  \n    }else{\n      if(stage === 'live'){\n        setProvider(new InfuraProvider())\n      }else{\n        setProvider(new JsonRpcProvider('http://localhost:8545'))\n      }\n    }\n    checkNetwork(provider)\n    if(connected){\n      if(network !== 1){\n        setWarning('You are connected to the wrong network(only mainnet is supported)')\n      }else{\n        setWarning(false)\n      }\n    }else{\n      setWarning('Your browser is not connected to wallet (eg: Metamask)')\n    }\n  }, [window, account, connected, address, network, warning])\n  const isOwner = (address && address.toLowerCase()) === (account && account.toLowerCase())\n  const isDeedOwner = (address && address.toLowerCase()) === (deed && deed.deedOwner.toLowerCase())\n  let deeds = []\n  if(accountData && accountData.account){\n    deeds = accountData.account.deeds\n  }\n  const domains = deeds.map(deed => {\n    const label = labelData?.account && labelData.account.domains.filter((domain) => domain.labelhash === deed?.name?.id )[0]\n    return {\n      id:deed.id,\n      name:label?.labelName,\n      labelhash:deed.name?.id,\n      value:(deed.value / Math.pow(10,18))\n    }\n  })\n  const sum = domains.map(d => d.value).reduce((a,b)=> parseFloat(a)+parseFloat(b), 0)\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={imgData} className=\"App-logo\" alt=\"react-logo\" />\n      <h2>Unclaimed deposit search</h2>\n      {warning ? (<span style={{color:'yellow', marginBottom:'5px'}}>{warning}</span>) : (<span>&nbsp;</span>)}\n      <input onChange={handleInput} placeholder=\"Enter ENS name or ETH address\" value={value} ></input>\n      {domains && (\n          <>\n            <div style={{marginTop:'5px'}}>{account}</div>\n            {value && (<div>owns { domains.length === 100 ? 'more than' : '' } {domains.length} (worth {sum.toFixed(2)} ETH) name{ domains.length === 1 ? '' : 's'} to claim deposit</div>)}\n            <div className=\"App-domains\">\n              {\n                domains.map((d) => {\n                  const displayName = !!(d.name) ? `${d.name}.eth` : d.labelhash ? (`${d.labelhash && d.labelhash.slice(0,5)}...`) : 'unknown'\n                  return(\n                    <>\n                      <span>{displayName} has {d.value} ETH deposit</span>\n                      {\n                        connected && isOwner && d.value > 0 ? (\n                          <button onClick={() => releaseDeed(provider, d.labelhash)} >\n                            Claim\n                          </button>\n                        ) : (<span></span>)\n                      }\n                    </>      \n                  )\n                })\n              }\n            </div>\n            {deed && \n              (\n                <div>\n                  <p>\n                    {value} has {deed.value.toFixed(2)} ETH deposit\n                  </p>\n                  {\n                    connected && isDeedOwner ? (\n                      <button onClick={() => releaseDeed(provider, deed.labelhash)} >\n                        Claim\n                      </button>\n                    ) : (<span></span>)\n                  }\n                </div>\n              )\n            }\n\n            <span style={{width:\"60%\", marginBottom:\"1em\", color:\"yellow\"}}>{message}</span>\n            {domains.length > 0 && !isOwner ? (\n              <span style={{width:\"60%\", marginBottom:\"1em\"}}>To return the deposit, you need to connect to the wallet which auctioned off the names</span>\n            ): ''}\n          </> \n        )\n      }\n\n\n      </header>\n      <div className=\"App-body\">\n        { statsEntity && <>\n          There are currently {statsEntity.numOfDeeds} deeds holding {(statsEntity.currentValue / Math.pow(10,18)).toFixed(2)} ETH <br/>\n          To understand more about these unclaimed deposits, <a href=\"https://medium.com/@makoto_inoue/how-to-get-back-the-unclaimed-deposit-1e2b1767b930\">read the blog post</a>.\n          <br/>\n          Bootstrapped with <a href=\"https://github.com/PaulRBerg/create-eth-app\">Create Eth App</a>\n        </>}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ApolloClient from \"apollo-boost\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport \"./index.css\";\nimport App from \"./App\";\n\n// You should replace this url with your own and put it into a .env file\n// See all subgraphs: https://thegraph.com/explorer/\nconsole.log({ENV:process.env})\n\nlet stage, reclaimUri, ensUri, registryAddress, registrarAddress\n// if (process.env.REACT_APP_STAGE === 'live'){\n  stage = 'live'\n  reclaimUri = process.env.REACT_APP_RECLAIM_GRAPH_URI || \"http://127.0.0.1:8000/subgraphs/name/makoto/ens-reclaim-deposit-subgraph\"\n  ensUri = process.env.REACT_APP_ENS_GRAPH_URI || \"http://127.0.0.1:8000/subgraphs/name/graphprotocol/ens\"\n  registrarAddress = '0x6090a6e47849629b7245dfa1ca21d94cd15878ef'\n  registryAddress = '0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e'\n// }else{\n//   stage = 'dev'\n//   reclaimUri = \"http://127.0.0.1:8000/subgraphs/name/makoto/ens-reclaim-deposit-subgraph\"\n//   ensUri = \"http://127.0.0.1:8000/subgraphs/name/graphprotocol/ens\"\n//   registrarAddress = '0xA47b9D846D03E74C736D650dfb23D085C773AFCE'\n//   registryAddress = '0x7F90FA6F67Aa366D8ca17d36a1B2E5A06C647151'\n// }\n\nconst client = new ApolloClient({ uri: reclaimUri });\nconst ensClient = new ApolloClient({ uri: ensUri });\n\nReactDOM.render(\n  <ApolloProvider client={client} >\n    <App ensClient={ensClient} registrarAddress={registrarAddress} registryAddress={registryAddress} stage={stage} />\n  </ApolloProvider>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}